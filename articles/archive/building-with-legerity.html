<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Writing UI tests | Legerity </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Writing UI tests | Legerity ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../../images/Logo.png">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap-grid.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-87DrmpqHRiY8hPLIr7ByqhPIywuSsjuQAfMXAE0sMUpY3BM7nXjf+mLIUSvhDArs" crossorigin="anonymous">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    <meta property="docfx:newtab" content="true">
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/Logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="building-with-legerity">
<h1 id="writing-ui-tests-with-legerity">Writing UI tests with Legerity</h1>

<p>Writing UI tests should be simple and easy.</p>
<p>Legerity exposes an <code>AppManager</code> that is a lightweight wrapper for the application driver that allows you to start your applications using a configuration object.</p>
<h2 id="creating-a-base-test-class">Creating a base test class</h2>
<p>Using your testing framework of choice, getting your application started in the appropriate Selenium driver is as simple as calling <code>AppManager.StartApp()</code> passing through an <code>AppManagerOptions</code> configuration object.</p>
<p>Depending on your configuration object, the specific application will launch.</p>
<p>Currently, the <code>AppManager</code> configuration supports the following app drivers.</p>
<ul>
<li><a href="https://github.com/microsoft/WinAppDriver">WindowsDriver</a>
<ul>
<li><a href="https://github.com/MADE-Apps/legerity/blob/main/src/Legerity.Core/Windows/WindowsAppManagerOptions.cs">WindowsAppManagerOptions</a></li>
</ul>
</li>
<li>AndroidDriver
<ul>
<li><a href="https://github.com/MADE-Apps/legerity/blob/main/src/Legerity.Core/Android/AndroidAppManagerOptions.cs">AndroidAppManagerOptions</a></li>
</ul>
</li>
<li>IOSDriver
<ul>
<li><a href="https://github.com/MADE-Apps/legerity/blob/main/src/Legerity.Core/IOS/IOSAppManagerOptions.cs">IOSAppManagerOptions</a></li>
</ul>
</li>
<li>ChromeDriver, FirefoxDriver, OperaDriver, SafariDriver, EdgeDriver, InternetExplorerDriver
<ul>
<li><a href="https://github.com/MADE-Apps/legerity/blob/main/src/Legerity.Core/Web/WebAppManagerOptions.cs">WebAppManagerOptions</a></li>
</ul>
</li>
</ul>
<p>For Appium drivers, an options object also provides the use of additional capabilities using the <code>AppiumOptions</code> object to apply to the driver when the app is started.</p>
<p>In the examples below, using NUnit, each test that implements the <code>BaseTestClass</code> will launch the application at the start of each test, then close the application once the test has been completed.</p>
<h3 id="example-base-test-class-for-a-windows-application">Example base test class for a Windows application</h3>
<p>This example showcases how to start your Windows application using the application's unique identifier.</p>
<p>When your tests start, the <code>LaunchWinAppDriver</code> property of the <code>WindowsAppManagerOptions</code> will automatically start a new WinAppDriver process, if one is not already running. This support allows you to easily run your tests as part of a CI build without additional overhead of scripting the process to run.</p>
<p>You also have additional properties that allows you to maximize the application window, or set the size of the window. This is useful in scenarios where your application has responsive UI and you wish to test it under those views.</p>
<pre><code class="lang-csharp">namespace MyWindowsApplication.UiTests
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Threading.Tasks;
    
    using Legerity;
    using Legerity.Windows;
    using Legerity.Windows.Extensions;

    using NUnit.Framework;

    using OpenQA.Selenium.Appium.Windows;
    using OpenQA.Selenium.Remote;

    public abstract class BaseTestClass : LegerityTestClass
    {
        public const string WindowsApplication = &quot;com.madeapps.sampleapp_7mzr475ysvhxg!App&quot;;

        protected WindowsDriver&lt;WindowsElement&gt; WindowsApp { get; private set; }

        [SetUp]
        public void Initialize()
        {
            WindowsApp = this.StartWindowsApp(
                new WindowsAppManagerOptions(WindowsApplication)
                {
                    DriverUri = &quot;http://127.0.0.1:4723&quot;,
                    LaunchWinAppDriver = true,
                    Maximize = true
                });
        }

        [TearDown]
        public void Cleanup()
        {
            StopApp(WindowsApp);
        }
    }
}
</code></pre>
<h3 id="example-base-test-class-for-an-android-application">Example base test class for an Android application</h3>
<p>This example showcases how to start your Android application using the ID and activity of an app that is already installed on a device. You can also choose to launch your application by APK if the application is not installed.</p>
<p>When your tests start, the <code>LaunchAppiumServer</code> property of the <code>AndroidAppManagerOptions</code> will automatically start a new Appium server process, if one is not already running. This support allows you to easily run your tests as part of a CI build without additional overhead of scripting the process to run.</p>
<p>You also have additional properties that allows you to choose the device that the application should be under test on using the <code>DeviceName</code> or <code>DeviceId</code> property. This is useful if you wish to pick a specific emulator or physical device.</p>
<pre><code class="lang-csharp">namespace MyAndroidApplication.UiTests
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Threading.Tasks;
    
    using Legerity;
    using Legerity.Android;
    using Legerity.Android.Extensions;

    using NUnit.Framework;

    using OpenQA.Selenium.Appium.Android;
    using OpenQA.Selenium.Remote;

    public abstract class BaseTestClass : LegerityTestClass
    {
        public const string AndroidApplication = &quot;com.made.sampleapp&quot;;

        public const string AndroidApplicationActivity = $&quot;{AndroidApplication}.MainActivity&quot;;

        protected AndroidDriver&lt;AndroidElement&gt; AndroidApp { get; private set; }

        [SetUp]
        public void Initialize()
        {
            AndroidApp = this.StartAndroidApp(
                new AndroidAppManagerOptions
                {
                    AppId = AndroidApplication,
                    AppActivity = AndroidApplicationActivity,
                    LaunchAppiumServer = true,
                    DriverUri = &quot;http://localhost:4723/wd/hub&quot;
                });
        }

        [TearDown]
        public void Cleanup()
        {
            StopApp(AndroidApp);
        }
    }
}
</code></pre>
<h3 id="example-base-test-class-for-an-ios-application">Example base test class for an iOS application</h3>
<p>This example showcases how to start your iOS application using the ID of an app that is already installed on a device.</p>
<p>When your tests start, the <code>LaunchAppiumServer</code> property of the <code>IOSAppManagerOptions</code> will automatically start a new Appium server process, if one is not already running. This support allows you to easily run your tests as part of a CI build without additional overhead of scripting the process to run.</p>
<p>You also have to provide additional properties that allows you to choose the device that the application should be under test on using the <code>DeviceName</code> or <code>DeviceId</code> property. This is useful if you wish to pick a specific emulator or physical device.</p>
<pre><code class="lang-csharp">namespace MyIOSApplication.UiTests
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Threading.Tasks;
    
    using Legerity;
    using Legerity.IOS;
    using Legerity.IOS.Extensions;

    using NUnit.Framework;

    using OpenQA.Selenium.Appium.IOS;
    using OpenQA.Selenium.Remote;

    public abstract class BaseTestClass : LegerityTestClass
    {
        public const string IOSApplication = &quot;com.made.sampleapp&quot;;

        protected IOSDriver&lt;IOSElement&gt; IOSApp { get; private set; }

        [SetUp]
        public void Initialize()
        {
            IOSApp = this.StartIOSApp(
                new IOSAppManagerOptions
                {
                    AppId = IOSApplication,
                    DeviceName = &quot;iPhone SE (3rd generation) Simulator&quot;,
                    DeviceId = &quot;56755E6F-741B-478F-BB1B-A48E05ACFE8A&quot;,
                    OSVersion = &quot;15.4&quot;,
                    LaunchAppiumServer = true,
                    DriverUri = &quot;http://localhost:4723/wd/hub&quot;
                });
        }

        [TearDown]
        public void Cleanup()
        {
            StopApp(IOSApp);
        }
    }
}
</code></pre>
<h3 id="example-base-test-class-for-a-web-application">Example base test class for a Web application</h3>
<p>This example showcases how to start your web application using a URL using a specific browser and associated driver. This example is using the Microsoft Edge browser with a path to the <a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/">Microsoft Edge Web Driver</a>.</p>
<p>You can also use the web driver NuGet packages in your test project to automatically pull in the specific version of a web drive you require.</p>
<p>When your tests start, the web browser will launch the URL provided to begin running the test scenarios.</p>
<p>You also have additional properties that allows you to maximize the browser window, or set the size. This is useful in scenarios where your application has responsive UI and you wish to test it under those views.</p>
<p>In this example, the <code>AppManagerOptions.ExplicitWait</code> property has been set to 10 seconds. This property is available to all <code>AppManagerOptions</code> types and ensures that the provided wait time is used while finding elements. In this example, a query for a UI element will wait a maximum of 10 seconds before failing.</p>
<pre><code class="lang-csharp">namespace MyWebApplication.UiTests
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Threading.Tasks;
    
    using Legerity;
    using Legerity.Web;

    using NUnit.Framework;

    using OpenQA.Selenium.Remote;

    public abstract class BaseTestClass : LegerityTestClass
    {
        public const string WebApplication = &quot;http://localhost:5000&quot;;

        [SetUp]
        public void Initialize()
        {
            this.StartApp(
                new WebAppManagerOptions(WebAppDriverType.Edge, Path.Combine(Environment.CurrentDirectory, &quot;Tools\\Edge&quot;))
                {
                    Maximize = true, 
                    Url = WebApplication, 
                    ImplicitWait = TimeSpan.FromSeconds(10)
                });
        }

        [TearDown]
        public void Cleanup()
        {
            this.StopApp();
        }
    }
}
</code></pre>
<h3 id="example-base-test-class-for-a-cross-platform-application">Example base test class for a cross-platform application</h3>
<p>This example showcases how to start a cross-platform application that could potentially have the same user experience across all relevant platforms. It is also useful for testing the same applications across multiple browsers too.</p>
<p>Taking advantage of the <code>TestFixtureSource</code> capability of NUnit, this setup allows a test class to be configured with multiple methods of construction. In this example, we are providing a collection of <code>AppManagerOption</code> objects as the source. This allows any tests within the class to run the respective app drivers and perform the same test across multiple platforms.</p>
<p>As you are not limited here by the number of applications, you can use this scenario for running against multiple web browsers, multiple variants of your native application, or run tests for applications built with the same user experience like Uno Platform or Xamarin.</p>
<pre><code class="lang-csharp">namespace MyApplication.UiTests
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Threading.Tasks;
    
    using Legerity;
    using Legerity.Android;
    using Legerity.IOS;
    using Legerity.Web;
    using Legerity.Windows;

    using NUnit.Framework;

    using OpenQA.Selenium.Appium.Android;
    using OpenQA.Selenium.Appium.iOS;
    using OpenQA.Selenium.Appium.Windows;
    using OpenQA.Selenium.Remote;

    public abstract class BaseTestClass : LegerityTestClass
    {
        public const string AndroidApplication = &quot;Tools\\Android\\com.made.sampleapp.apk&quot;;

        public const string WebApplication = &quot;http://localhost:5000&quot;;

        public const string WindowsApplication = &quot;com.madeapps.sampleapp_7mzr475ysvhxg!App&quot;;

        protected BaseTestClass(AppManagerOptions options)
            : base(options)
        {
        }

        protected static IEnumerable&lt;AppManagerOptions&gt; TestPlatformOptions =&gt; new List&lt;AppManagerOptions&gt;
        {
            new AndroidAppManagerOptions(Path.Combine(Environment.CurrentDirectory, AndroidApplication))
            {
                DriverUri = &quot;http://localhost:4723/wd/hub&quot;,
                LaunchAppiumServer = true
            },
            new WebAppManagerOptions(
                WebAppDriverType.Edge,
                Path.Combine(Environment.CurrentDirectory, &quot;Tools\\Edge&quot;))
            {
                Maximize = true, 
                Url = WebApplication, 
                ImplicitWait = TimeSpan.FromSeconds(10)
            },
            new WindowsAppManagerOptions(WindowsApplication)
            {
                DriverUri = &quot;http://127.0.0.1:4723&quot;, 
                LaunchWinAppDriver = true, 
                Maximize = true
            }
        };

        [SetUp]
        public void Initialize()
        {
            this.StartApp();
        }

        [TearDown]
        public void Cleanup()
        {
            this.StopApp();
        }
    }

    [TestFixtureSource(nameof(TestPlatformOptions))]
    public class LoginPageTests : BaseTestClass
    {
        public LoginPageTests(AppManagerOptions options) : base(options)
        {
        }
    }
}
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/MADE-Apps/legerity/blob/main/docs/articles/archive/building-with-legerity.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright (c) MADE Apps
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
